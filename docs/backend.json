{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile within the INSS application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile (same as Firebase Auth UID)."
        },
        "cpf": {
          "type": "string",
          "description": "User's CPF (Cadastro de Pessoas Físicas)."
        },
        "fullName": {
          "type": "string",
          "description": "User's full name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "User's phone number."
        },
        "address": {
          "type": "string",
          "description": "User's full address."
        },
        "birthDate": {
            "type": "string",
            "format": "date"
        }
      },
      "required": [
        "id",
        "cpf",
        "fullName"
      ]
    },
    "Beneficio": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Beneficio",
      "type": "object",
      "description": "Represents a type of benefit offered by INSS. This is static data.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the benefit."
        },
        "name": {
          "type": "string",
          "description": "Name of the benefit."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the benefit."
        }
      },
      "required": [
        "id",
        "name",
        "description"
      ]
    },
    "SolicitacaoBeneficio": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SolicitacaoBeneficio",
      "type": "object",
      "description": "Represents a benefit application submitted by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the benefit application."
        },
        "userId": {
          "type": "string",
          "description": "Firebase Auth UID of the user who submitted the request."
        },
        "user": {
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "cpf": { "type": "string"}
            }
        },
        "benefitId": {
          "type": "string",
          "description": "ID of the requested benefit."
        },
        "benefitTitle": {
            "type": "string"
        },
        "protocol": {
            "type": "string"
        },
        "status": {
          "type": "string",
          "enum": ["Em análise", "Exigência", "Deferido", "Indeferido", "Compareça presencialmente"]
        },
        "description": {
            "type": "string"
        },
        "requestDate": {
          "type": "string",
          "description": "Timestamp when the application was submitted.",
          "format": "date-time"
        },
        "exigencia": {
            "type": "object",
            "properties": {
                "text": { "type": "string" },
                "createdAt": { "type": "string", "format": "date-time" },
                "response": {
                    "type": "object",
                    "properties": {
                        "text": { "type": "string" },
                        "respondedAt": { "type": "string", "format": "date-time" }
                    }
                }
            }
        }
      },
      "required": [
        "id",
        "userId",
        "user",
        "benefitId",
        "benefitTitle",
        "status",
        "requestDate",
        "protocol"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/entities/UserProfile"
          },
          "description": "Stores user profile data. The userId is the Firebase Auth UID.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user (Firebase Auth UID)."
            }
          ]
        }
      },
      {
        "path": "/requests/{requestId}",
        "definition": {
          "entityName": "SolicitacaoBeneficio",
          "schema": {
            "$ref": "#/entities/SolicitacaoBeneficio"
          },
          "description": "Stores all benefit applications. The requestId is a unique ID for the application.",
          "params": [
            {
              "name": "requestId",
              "description": "The unique identifier for the benefit application."
            }
          ]
        }
      },
      {
        "path": "/admins/{adminId}",
        "definition": {
          "entityName": "AdminUser",
          "schema": {
             "type": "object",
             "properties": {
                "isAdmin": { "type": "boolean" }
             }
          },
          "description": "Collection to grant admin roles. If a document with the user's UID exists and isAdmin is true, they have admin privileges. The adminId is the Firebase Auth UID of the admin user.",
          "params": [
             {
               "name": "adminId",
               "description": "The unique identifier for the admin user (Firebase Auth UID)."
             }
          ]
        }
      }
    ]
  }
}
